<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Fake reCAPTCHA Puzzle</title>

        <style>
            html, body {
                height: 100%;
                margin: 0;
                font-family: sans-serif;
            }

            .fkrc-container {
                position: absolute;
                top: 10px;
                left: 10px;
                max-width: 90vw;
            }

            /* Smaller popup base size */
            #fkrc-verifywin-window {
                width: 480px;          /* desktop width */
                max-width: 90vw;       /* prevent overflow on small screens */
                margin-left: auto;
                margin-right: auto;
            }

            #fkrc-verifywin-window .fkrc-verifywin-container,
            #fkrc-verifywin-window .fkrc-verifywin-header,
            #fkrc-verifywin-window .fkrc-verifywin-main,
            #fkrc-verifywin-window .fkrc-verifywin-footer {
                width: 100%;
                box-sizing: border-box;
            }

            .fkrc-verifywin-main {
                padding: 16px;
            }

            .clue-subtitle {
                margin-top: 24px;
            }

            /* 3x2 grid, smaller tiles */
            .verify-images-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: repeat(2, auto);
                gap: 8px;
            }

            .verify-image-tile {
                position: relative;
                cursor: pointer;
                overflow: hidden;
                border-radius: 4px;
                border: 2px solid transparent;
                transition: border-color 0.2s ease;
            }

            .verify-image-tile:hover {
                border-color: #4285f4;
            }

            .verify-image-tile img.main-img {
                width: 100%;
                height: auto;
                aspect-ratio: 4/3;
                object-fit: cover;
                display: block;
            }

            .verify-image-tile .tick-icon {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 48px;
                height: 48px;
                display: none;
                pointer-events: none;
                z-index: 1;
            }

            .verify-image-tile.selected {
                border-color: #4285f4;
            }

            .verify-image-tile.selected .tick-icon {
                display: block;
            }

            /* Mobile / tablet: narrower popup, 2x3 grid */
            @media (max-width: 768px) {
                #fkrc-verifywin-window {
                    width: 92vw;
                    max-width: 92vw;
                    left: 4vw;
                }

                .fkrc-verifywin-main {
                    padding: 12px;
                }

                .verify-images-grid {
                    grid-template-columns: repeat(2, 1fr);
                    grid-template-rows: repeat(3, auto);
                    gap: 6px;
                }

                .verify-image-tile img.main-img {
                    aspect-ratio: 4/3;
                }

                .verify-image-tile .tick-icon {
                    width: 40px;
                    height: 40px;
                }
            }

            @media (max-width: 480px) {
                .fkrc-container {
                    left: 5px;
                    top: 5px;
                }

                #fkrc-verifywin-window {
                    width: 94vw;
                    max-width: 94vw;
                    left: 3vw;
                }

                .verify-images-grid {
                    gap: 4px;
                }
            }
        </style>

        <link href="src/fakerecaptcha.css" rel="stylesheet">
    </head>
    <body>
    <!-- Fake captcha start -->
    <div class="fkrc-container fkrc-m-p">
        <!-- Captcha checkbox widget (original size) -->
        <div id="fkrc-checkbox-window" class="fkrc-checkbox-window fkrc-m-p fkrc-block">
            <div class="fkrc-checkbox-container fkrc-m-p">
                <button type="button" id="fkrc-checkbox" class="fkrc-checkbox fkrc-m-p fkrc-line-normal"></button>
            </div>
            <p class="fkrc-im-not-a-robot fkrc-m-p fkrc-line-normal">I'm not a robot</p>
            <img src="images/captcha_logo.svg" class="fkrc-captcha-logo fkrc-line-normal" alt="">
            <p class="fkrc-checkbox-desc fkrc-m-p fkrc-line-normal">CAPTCHA</p>
            <p class="fkrc-checkbox-desc fkrc-m-p fkrc-line-normal">Privacy - Terms</p>
            <img src="images/captcha_spinner.gif" class="fkrc-spinner fkrc-m-p fkrc-line-normal" alt="" id="fkrc-spinner">
        </div>

        <!-- Captcha checkbox verification window (popup) -->
        <div id="fkrc-verifywin-window" class="fkrc-verifywin-window">
            <div class="fkrc-verifywin-container">
                <header class="fkrc-verifywin-header">
                    <span class="fkrc-verifywin-header-text-medium fkrc-m-p fkrc-block">Clue</span>
                    <span class="fkrc-verifywin-header-text-big fkrc-m-p fkrc-block">
                        Present for your neighbour? Firstly, please loudly utter, "Merry Christmas!" and keep eggnog. (4,4)
                    </span>
                    <span class="fkrc-verifywin-header-text-medium fkrc-m-p fkrc-block clue-subtitle">
                        Select the answer
                    </span>
                </header>

                <main class="fkrc-verifywin-main">
                    <div class="verify-images-grid">
                        <div class="verify-image-tile" data-img="img1">
                            <img src="images/img1.jpg" alt="Image 1" class="main-img">
                            <img src="images/icon-256x256.png" alt="Selected" class="tick-icon">
                        </div>
                        <div class="verify-image-tile" data-img="img2">
                            <img src="images/img2.jpg" alt="Image 2" class="main-img">
                            <img src="images/icon-256x256.png" alt="Selected" class="tick-icon">
                        </div>
                        <div class="verify-image-tile" data-img="img3">
                            <img src="images/img3.jpg" alt="Image 3" class="main-img">
                            <img src="images/icon-256x256.png" alt="Selected" class="tick-icon">
                        </div>
                        <div class="verify-image-tile" data-img="img4">
                            <img src="images/img4.jpg" alt="Image 4" class="main-img">
                            <img src="images/icon-256x256.png" alt="Selected" class="tick-icon">
                        </div>
                        <div class="verify-image-tile" data-img="img5">
                            <img src="images/img5.jpg" alt="Image 5" class="main-img">
                            <img src="images/icon-256x256.png" alt="Selected" class="tick-icon">
                        </div>
                        <div class="verify-image-tile" data-img="img6">
                            <img src="images/img6.jpg" alt="Image 6" class="main-img">
                            <img src="images/icon-256x256.png" alt="Selected" class="tick-icon">
                        </div>
                    </div>
                </main>
            </div>

            <footer class="fkrc-verifywin-container fkrc-verifywin-footer">
                <div class="fkrc-verifywin-footer-left">
                    Press the verify button to proceed.
                </div>
                <button type="button" class="fkrc-verifywin-verify-button fkrc-block" id="fkrc-verifywin-verify-button">Verify</button>
            </footer>
        </div>

        <img src="images/captcha_arrow.svg" alt="" class="fkrc-verifywin-window-arrow" id="fkrc-verifywin-window-arrow"/>
    </div>
    <!-- Fake captcha end -->

    <script src="src/fakerecaptcha.js"></script>

    <script>
  document.addEventListener('DOMContentLoaded', function () {
    var tiles = document.querySelectorAll('.verify-image-tile');

    // Only one tile selected at a time
    tiles.forEach(function (tile) {
      tile.addEventListener('click', function () {
        tiles.forEach(function (t) { t.classList.remove('selected'); });
        tile.classList.add('selected');
      });
    });

    var verifyBtn = document.getElementById('fkrc-verifywin-verify-button');

    // Remove other click handlers (from fakerecaptcha.js)
    var newBtn = verifyBtn.cloneNode(true);
    verifyBtn.parentNode.replaceChild(newBtn, verifyBtn);
    verifyBtn = newBtn;

    verifyBtn.addEventListener('click', function (e) {
      e.preventDefault();

      var img4Tile = document.querySelector('.verify-image-tile[data-img="img4"]');
      if (img4Tile && img4Tile.classList.contains('selected')) {
        alert('Correct answer!');
        setTimeout(function () {
          window.location.href = "https://www.buzzfeed.com/casualcat108/which-character-from-harry-potter-would-your-answe?utm_source=dynamic&utm_campaign=bfsharecopy";
        }, 2000); // 2 seconds
      } else {
        alert('Please select the correct image.');
      }
    });
  });
</script>


    </body>
</html>
